اشمل "مـتم/طـرفية"؛
اشمل"مـتم/مـصفوفة.أسس"؛
اشمل "مـحا"؛
مـحا.اشمل_ملف("Alusus/Threading"، "تـوازي.أسس")؛

عرف كائن_مزامن: تـوازي.مـزامن؛

عرف تعداد: صحيح = 0؛

دالة اختبار {
    استخدم تـوازي؛
    عرف عدد_المسالك: 10؛
    عرف تعريف_توازي: مصفوفة[مـسلك, عدد_المسالك]؛
    عرف عدد_صح: صحيح؛
    عرف عدد_صح2: صحيح؛
    لكل عدد_صح = 0, عدد_صح <  عدد_المسالك, عدد_صح++ {
       أنشئ_مسلكا(تعريف_توازي(عدد_صح)~مؤشر, 0, دالة_توازي~مؤشر, 0)؛
    }

    لكل عدد_صح2 = 0, عدد_صح2 <  عدد_المسالك, عدد_صح2++ {
        التق_بالمسلك(تعريف_توازي(عدد_صح2), 0)؛
    }
}

دالة دالة_توازي (ح: مؤشر): مؤشر {
    استخدم تـوازي؛
    اقفل_مزامنا(كائن_مزامن~مؤشر)؛
    مـتم.طـرفية.اطبع("Thread number: %d\n", تعداد)؛
    تعداد++؛
    افتح_مزامنا(كائن_مزامن~مؤشر)؛
    ارجع 0؛
}

اختبار()؛

