اشمل "مـتم/طـرفية"؛
اشمل "مـتم/نـظام"؛
اشمل "مـتم/ريـاضيات"؛
اشمل "مـحا"؛
اشمل "مغلفة"؛
مـحا.اشمل_ملف("Alusus/Threading"، "تـوازي.أسس")؛
استخدم مـتم؛

صنف صـنفي {
    عرف ع: صـحيح؛
    عملية هذا~هيئ() {
        طـرفية.اطبع("صـنفي~هيئ\ج")؛
    }
    عملية هذا~أتلف() {
        طـرفية.اطبع("صـنفي~أتلف\ج")؛
    }
}

عرف متغير: تـوازي.مـحلي_لمسلك[صـنفي](مغلفة(م: سند[صـنفي]) {
    م.ع = ريـاضيات.عشوائي()؛
})؛

دالة اختبار {
    استخدم تـوازي؛

    عرف شريط1: مـسلك؛
    عرف شريط2: مـسلك؛

    أنشئ_مسلكا(شريط1~مؤشر، 0، اطبع_الرسالة~مؤشر، "عملية1")؛
    أنشئ_مسلكا(شريط2~مؤشر، 0، اطبع_الرسالة~مؤشر، "عملية2")؛

    التق_بمسلك(شريط1، 0)؛
    التق_بمسلك(شريط2، 0)؛
}

دالة اطبع_الرسالة (م: مؤشر): مؤشر {
    عرف ع: صـحيح؛
    لكل ع = 0، ع < 10، ++ع {
        طـرفية.اطبع("%s: %d، %d\ج"، م، متغير.القيمة.ع، ع)؛
        نـظام.نم(10000)؛
    }
    أرجع 0؛
}

اختبار()؛

